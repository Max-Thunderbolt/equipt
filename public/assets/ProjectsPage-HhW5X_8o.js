import{_ as S,f as U,g as V,r as h,i as E,c as t,a as e,b as m,u as d,m as F,t as r,F as I,k as $,j as C,w as b,v as P,q,p as B,e as L,x as R,o,n as T}from"./index-BzJ7YkvY.js";const a=u=>(B("data-v-a32edc6f"),u=u(),L(),u),Y={class:"projects-page container"},z={class:"page-header"},O=a(()=>e("h1",null,"My Projects",-1)),A={class:"header-actions"},G=["disabled"],H=a(()=>e("span",{class:"refresh-icon"},"↻",-1)),J=[H],K=a(()=>e("span",{class:"icon"},"+",-1)),Q={key:0,class:"loading-container"},W=a(()=>e("div",{class:"loading-spinner"},null,-1)),X=a(()=>e("p",null,"Loading projects...",-1)),Z=[W,X],ee={key:1,class:"error-message"},se={key:2,class:"empty-state"},te=a(()=>e("p",null,"You haven't created any projects yet.",-1)),oe={key:3,class:"projects-grid"},ae=["onClick"],ce={class:"project-header"},ne={key:0,class:"project-description"},re={key:1,class:"project-description empty"},ie={class:"project-meta"},le={class:"version-tag"},de={class:"date"},ue={class:"modal-content"},pe=a(()=>e("h2",null,"Create New Project",-1)),_e={class:"form-group"},he=a(()=>e("label",{for:"project-name"},"Project Name *",-1)),ve={class:"form-group"},me=a(()=>e("label",{for:"project-description"},"Description",-1)),be={class:"checkbox-group"},fe={class:"checkbox-label"},ye=a(()=>e("label",{for:"project-public"},"Make project public",-1)),je=a(()=>e("div",{class:"checkbox-help"}," Public projects can be discovered by other users ",-1)),ge={key:0,class:"error-message"},ke={class:"form-actions"},Ce=["disabled"],Pe={__name:"ProjectsPage",setup(u){const w=R(),{projects:f,loading:y,error:j,fetchUserProjects:g}=U(),{createProject:x}=V(),v=h(!1),c=h({name:"",description:"",is_public:!1}),l=h(null),p=h(!1),k=()=>{c.value={name:"",description:"",is_public:!1},l.value=null,v.value=!0},_=()=>{v.value=!1},M=async()=>{if(!c.value.name){l.value="Project name is required";return}try{p.value=!0,l.value=null;const n=await x(c.value);_(),w.push(`/projects/${n.id}`)}catch(n){console.error("Error creating project:",n),l.value=n.message||"Failed to create project"}finally{p.value=!1}},D=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/"):"",N=async()=>{await g()};return E(async()=>{await g()}),(n,i)=>(o(),t("div",Y,[e("div",z,[O,e("div",A,[e("button",{class:"btn btn-icon refresh-btn",onClick:N,disabled:d(y),title:"Refresh projects"},J,8,G),e("button",{class:"btn btn-primary",onClick:k},[K,F(" Create Project ")])])]),d(y)?(o(),t("div",Q,Z)):d(j)?(o(),t("div",ee,r(d(j)),1)):d(f).length===0?(o(),t("div",se,[te,e("button",{class:"btn btn-primary",onClick:k},"Create Your First Project")])):(o(),t("div",oe,[(o(!0),t(I,null,$(d(f),s=>(o(),t("div",{key:s.id,class:"project-card card",onClick:we=>n.$router.push(`/projects/${s.id}`)},[e("div",ce,[e("h3",null,r(s.name||"Untitled Project"),1),s.role?(o(),t("span",{key:0,class:T(["role-badge",{owner:s.role==="owner",admin:s.role==="admin",member:s.role==="member"}])},r(s.role),3)):m("",!0)]),s.description?(o(),t("p",ne,r(s.description),1)):(o(),t("p",re,"No description provided")),e("div",ie,[e("span",le,"v"+r(s.version||"0.1.0"),1),e("span",de,r(D(s.created_at)),1)])],8,ae))),128))])),v.value?(o(),t("div",{key:4,class:"modal-overlay",onClick:C(_,["self"])},[e("div",ue,[e("div",{class:"modal-header"},[pe,e("button",{class:"close-btn",onClick:_},"×")]),e("form",{onSubmit:C(M,["prevent"]),class:"create-form"},[e("div",_e,[he,b(e("input",{type:"text",id:"project-name","onUpdate:modelValue":i[0]||(i[0]=s=>c.value.name=s),placeholder:"Enter project name",required:""},null,512),[[P,c.value.name]])]),e("div",ve,[me,b(e("textarea",{id:"project-description","onUpdate:modelValue":i[1]||(i[1]=s=>c.value.description=s),placeholder:"Enter project description (optional)",rows:"4"},null,512),[[P,c.value.description]])]),e("div",be,[e("div",fe,[b(e("input",{type:"checkbox",id:"project-public","onUpdate:modelValue":i[2]||(i[2]=s=>c.value.is_public=s)},null,512),[[q,c.value.is_public]]),ye]),je]),l.value?(o(),t("div",ge,r(l.value),1)):m("",!0),e("div",ke,[e("button",{type:"button",class:"btn btn-secondary",onClick:_},"Cancel"),e("button",{type:"submit",class:"btn btn-primary",disabled:p.value},r(p.value?"Creating...":"Create Project"),9,Ce)])],32)])])):m("",!0)]))}},Me=S(Pe,[["__scopeId","data-v-a32edc6f"]]);export{Me as default};
